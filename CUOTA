<p>Your remaining quota: <span id="quota">0</span></p>
<button id="actionButton">Perform Action</button>

<script>
  // Roles and weekly quotas
  const roleQuotas = {
    'Ownership': Infinity,
    'Management': 50,
    'Administrator': 30,
    'Moderator': 20
  };

  // Simulated current user (you can modify role here)
  let user = {
    role: 'Moderator', // Change to test other roles
    quota: null,
    lastReset: null
  };

  // Load user from localStorage
  function loadUser() {
    const stored = localStorage.getItem('staffUser');
    if (stored) user = JSON.parse(stored);
  }

  // Save user to localStorage
  function saveUser() {
    localStorage.setItem('staffUser', JSON.stringify(user));
  }

  // Check if today is Monday
  function isMonday() {
    return new Date().getDay() === 1;
  }

  // Reset quota if Monday
  function resetQuota() {
    const todayStr = new Date().toDateString();
    if ((isMonday() && user.lastReset !== todayStr) || user.quota === null) {
      user.quota = roleQuotas[user.role];
      user.lastReset = todayStr;
      saveUser();
    }
  }

  // Display quota
  function displayQuota() {
    document.getElementById('quota').textContent = user.quota;
  }

  // Check if action is allowed
  function canPerformAction(actionType) {
    if (user.quota <= 0 && user.role !== 'Ownership') return false;

    switch(user.role) {
      case 'Ownership': return true;
      case 'Management': return actionType !== 'manageOwnership';
      case 'Administrator': return actionType !== 'manageRoles';
      case 'Moderator': return actionType === 'moderateContent';
      default: return false;
    }
  }

  // Reduce quota after action
  function reduceQuota(amount = 1) {
    if (user.role === 'Ownership') return;
    user.quota = Math.max(0, user.quota - amount);
    saveUser();
    displayQuota();
  }

  // Initialize
  document.addEventListener('DOMContentLoaded', () => {
    loadUser();
    resetQuota();
    displayQuota();

    document.getElementById('actionButton').addEventListener('click', () => {
      if (!canPerformAction('moderateContent')) {
        alert('Action not allowed or quota exceeded!');
        return;
      }
      reduceQuota();
      alert('Action performed!');
    });
  });
</script>

</script>

<p>Your remaining quota: <span id="quota">0</span></p>
<button id="actionButton">Perform Action</button>
